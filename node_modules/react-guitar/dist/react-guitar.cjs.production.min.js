"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@emotion/react"),r=require("react"),n=e(require("lodash.range")),o=e(require("lodash.uniqueid")),i=e(require("classnames")),a=require("@tonaljs/note"),s=require("@tonaljs/interval"),l=e(require("color")),u=require("keyboard-key"),c="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function f(e,t,r){var n=e.slice(0);return n[t]=r,n}var d=function(e){return{description:"A typical Spanish guitar with a brown fretboard and golden details",color:"#333333",nut:{color:"#fffacd"},fret:{color:"#9e6429",separator:{color:"#daa520",shadow:!0},counter:{color:"#606c76"}},string:{color:function(){return"#eeeeee"}},finger:{text:{color:"#606c76"},color:"white"}}}(),p=function(e){return"md"===e.fret.separator.width?.7:.3},g=function(e,t){return(t+e%t)%t};function m(e){var r=e.frets,o=r.from,a=r.amount;return t.jsx("div",{className:i(e.className,"frets"),onMouseEnter:e.onMouseEnter},void 0!==e.currentFret&&t.jsx("div",{className:"fret mute",style:{zIndex:-1===e.currentFret?1:void 0}},null==e.children?void 0:e.children(-1)),n(o,o+a+1).map((function(r){return t.jsx("div",{className:i("fret",{nut:0===r}),key:r},null==e.children?void 0:e.children(r))})))}exports.default=function(e){var n=e.strings,a=void 0===n?[]:n,s=e.frets,h=void 0===s?{from:0,amount:22}:s,y=e.lefty,b=void 0!==y&&y,x=e.center,v=void 0!==x&&x,j=e.renderFinger,w=e.theme,k=void 0===w?d:w,C=e.playOnHover,N=r.useMemo((function(){return e.id||o("guitar-")}),[e.id]),S=r.useMemo((function(){return function(e){return t.css({fontFamily:"'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",position:"relative",boxSizing:"border-box",maxWidth:"100%",overflowY:"auto",borderTopColor:e.color,borderTopStyle:"solid",borderTopWidth:"0.5em",overscrollBehaviorX:"none",background:e.color,WebkitTapHighlightColor:"rgba(0, 0, 0, 0)","&.lefty":{direction:"rtl",".marker":{transform:"scale(-1, 1)"},".mute":{left:"auto",right:0}},"*, *::before, *::after":{boxSizing:"border-box"},".frets":{display:"flex",position:"relative",".fret":{width:"10em",flexShrink:0,position:"relative","&.nut,&.mute":{width:"7em"},"&.mute":{position:"absolute",top:0,left:0}}},".frame":{height:"2em",".counter":{fontWeight:"bold",color:e.fret.counter.color},".fret":{display:"flex",alignItems:"center",justifyContent:"center",background:e.color}},".strings":{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative",minHeight:3.33125*3+"em",".string":{margin:0,padding:0,border:"none",".fret":{display:"flex",alignItems:"center",".actual-string":{transition:"opacity ease-in-out 0.1s",content:'""',width:"100%",height:"0.65em",position:"absolute",left:"0"},label:{fontSize:"1em",width:"100%",height:"3.33125em",display:"flex",alignItems:"center",justifyContent:"center",margin:0},"&:hover input:not(:disabled):not(:checked) ~ .finger":{opacity:.5},"input:not(:disabled)":{height:"100%",width:"100%"},"input:not(:disabled),input:not(:disabled) ~ .finger":{cursor:"pointer"},input:{position:"absolute",margin:0,opacity:0,"&:checked ~ .finger":{opacity:1},"&:focus:not(:disabled) ~ .finger":{boxShadow:"0 0 0 0.2em rgba(66, 153, 225, 0.5)"}},"&.mute":{"input:checked ~ .finger":{opacity:0},"input:focus ~ .finger,&:hover input:checked ~ .finger":{opacity:.5}}}}},".fretboard":{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",".fret":{display:"flex",flexDirection:"row-reverse",alignItems:"center",justifyContent:"end",backgroundColor:e.fret.color,"&.nut":{backgroundColor:e.nut.color},"&:not(.nut)::before":{content:'""',position:"absolute",top:"0",bottom:"0",width:p(e)+"em",backgroundColor:e.fret.separator.color,borderRight:e.fret.separator.shadow?"solid "+p(e)/2+"em "+l(e.fret.separator.color).darken(.1):0,borderRadius:e.fret.separator.radius?"3px":0,display:"inline-block"},".marker":{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",display:"flex",alignItems:"center",justifyContent:"center"}}},".finger":{color:e.finger.text.color,transition:"opacity ease-in-out 0.1s",background:e.finger.color,width:"5em",padding:"0",height:3.5/1.5+"em",borderRadius:"20px",borderBottom:"solid 0.2em "+l(e.finger.color).darken(.35),boxShadow:"0 1px 2px rgba(0, 0, 0, 0.16), 0 1px 2px rgba(0, 0, 0, 0.23)",fontWeight:"bold",opacity:0,display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative"},".sr-only":{position:"absolute",width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:0}})}(k)}),[k]),q=r.useRef(null),M=function(e){return F(e,0===a[e]?-1:0)},F=function(t,r){!function(e,t){var r,n;void 0===t&&(t=a[e]),null==(r=q.current)||null==r.querySelector||null==(n=r.querySelector('input[name="'+N+"-string-"+e+'"][value="'+t+'"]'))||n.focus()}(t,r),null==e.onChange||e.onChange(f(a,t,r))};c((function(){var e=q.current;if(v&&e){var t=e.querySelectorAll(".fret"),r=a.filter((function(e){return e>0})),n=Math.min.apply(Math,r),o=Math.max.apply(Math,r),i=t[n+Math.floor((o-n)/2)];i&&(e.scrollLeft=i.offsetLeft-e.offsetWidth/2+i.offsetWidth/2)}}),[q,a,v,b]);var R=r.useState(0),W=R[0],I=R[1];return t.jsx("div",{id:N,ref:q,css:S,className:i("guitar",{lefty:b},e.className),onKeyDown:function(e){var t=function(e){switch(u.getKey(e)){case"ArrowDown":return{x:0,y:1};case"ArrowUp":return{x:0,y:-1};case"ArrowRight":return{x:b?-1:1,y:0};case"ArrowLeft":return{x:b?1:-1,y:0};default:return null}}(e.nativeEvent);if(t){var r=g(W+t.y,a.length),n=a[r]+t.x;F(r,n>h.from+h.amount?-1:n<-1?h.from+h.amount:n),e.preventDefault()}}},t.jsx("div",{className:"sr-only"},"This is a guitar with ",a.length," strings and ",h.amount," frets, starting from ",h.from,". Its theme describes it as:"," ",k.description,".",e.onChange&&t.jsx("span",null,"Once you focus on a string you will be able to navigate strings and frets using the arrow keys."),e.onPlay&&t.jsx("span",null,"When a specific string is focused you can play it by pressing 'p'.")),t.jsx("div",{className:"sr-only",role:"status"},"Current fretting: ",a.join(", "),"."),t.jsx("div",{className:"strings"},t.jsx(m,{className:"fretboard",frets:h},k.fret.marker?function(e){return t.jsx("div",{className:"marker"},null==k.fret.marker?void 0:k.fret.marker(e))}:void 0),a.map((function(r,n){return t.jsx("fieldset",{key:n,className:"string"},t.jsx("legend",{className:"sr-only"},"String ",n+1,"."," ",-1===r&&"This string is muted."),t.jsx(m,{currentFret:r,frets:h,onMouseEnter:function(){return C&&(null==e.onPlay?void 0:e.onPlay(n))}},(function(o){return t.jsx("label",null,t.jsx("span",{className:"sr-only"},"Fret ",o," ",-1===o&&"(Mute)","."),o>=0&&t.jsx("span",{className:"actual-string",style:{opacity:-1===r?.2:1,borderBottom:"solid 0.2em "+l(k.string.color(n)).darken(.35),backgroundColor:k.string.color(n)}}),t.jsx("input",{disabled:!e.onChange,type:"radio",name:N+"-string-"+n,value:o,checked:r===o,onChange:function(t){null==e.onChange||e.onChange(f(a,n,o)),t.target.focus()},onClick:function(){return o===r&&M(n)},onKeyDown:function(t){switch(t.keyCode){case 80:null==e.onPlay||e.onPlay(n);break;case 13:M(n),t.preventDefault()}},onFocus:function(){return I(n)}}),t.jsx("span",{className:"finger"},null==j?void 0:j(n,-1===o?0:o)))})))}))),t.jsx(m,{className:"frame",frets:h},(function(e){return 0!==e?t.jsx("span",{className:"counter"},e):null})))},exports.getRenderFingerRelative=function(e,o){return function(i,a){return t.jsx(r.Fragment,null,n(12).map(s.fromSemitones)[g(e[i]+a-o,12)])}},exports.getRenderFingerSpn=function(e){return function(r,n){var o=a.get(a.fromMidiSharps(e[r]+n)),i=o.acc,s=o.oct;return t.jsx("span",null,o.letter,"#"===i?"♯":"b"===i?"♭":"",t.jsx("sub",{"aria-label":"octave "+s},s))}},exports.spanishTheme=d;
//# sourceMappingURL=react-guitar.cjs.production.min.js.map
