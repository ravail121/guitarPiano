{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\nvar react = require('@emotion/react');\nvar react$1 = require('react');\nvar range = _interopDefault(require('lodash.range'));\nvar uniqueId = _interopDefault(require('lodash.uniqueid'));\nvar classNames = _interopDefault(require('classnames'));\nvar note = require('@tonaljs/note');\nvar interval = require('@tonaljs/interval');\nvar color = _interopDefault(require('color'));\nvar keyboardKey = require('keyboard-key');\nvar useLayoutEffect = typeof window !== 'undefined' ? react$1.useLayoutEffect : react$1.useEffect;\nfunction set(array, pos, item) {\n  var newArray = array.slice(0);\n  newArray[pos] = item;\n  return newArray;\n}\nvar makeTheme = function makeTheme(theme) {\n  return theme;\n};\nvar spanishTheme = /*#__PURE__*/makeTheme({\n  description: 'A typical Spanish guitar with a brown fretboard and golden details',\n  color: '#333333',\n  nut: {\n    color: '#fffacd'\n  },\n  fret: {\n    color: '#9e6429',\n    separator: {\n      color: '#daa520',\n      shadow: true\n    },\n    counter: {\n      color: '#606c76'\n    }\n  },\n  string: {\n    color: function color() {\n      return '#eeeeee';\n    }\n  },\n  finger: {\n    text: {\n      color: '#606c76'\n    },\n    color: 'white'\n  }\n});\n\n/** @jsxRuntime classic */\n\nvar sw = function sw(theme) {\n  return theme.fret.separator.width === 'md' ? 0.7 : 0.3;\n};\nvar stringHeight = 3.33125;\nvar getStyles = function (theme) {\n  return react.css({\n    fontFamily: \"'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n    position: 'relative',\n    boxSizing: 'border-box',\n    maxWidth: '100%',\n    overflowY: 'auto',\n    borderTopColor: theme.color,\n    borderTopStyle: 'solid',\n    borderTopWidth: '0.5em',\n    overscrollBehaviorX: 'none',\n    background: theme.color,\n    WebkitTapHighlightColor: 'rgba(0, 0, 0, 0)',\n    '&.lefty': {\n      direction: 'rtl',\n      '.marker': {\n        transform: 'scale(-1, 1)'\n      },\n      '.mute': {\n        left: 'auto',\n        right: 0\n      }\n    },\n    '*, *::before, *::after': {\n      boxSizing: 'border-box'\n    },\n    '.frets': {\n      display: 'flex',\n      position: 'relative',\n      '.fret': {\n        width: '10em',\n        flexShrink: 0,\n        position: 'relative',\n        '&.nut,&.mute': {\n          width: '7em'\n        },\n        '&.mute': {\n          position: 'absolute',\n          top: 0,\n          left: 0\n        }\n      }\n    },\n    '.frame': {\n      height: '2em',\n      '.counter': {\n        fontWeight: 'bold',\n        color: theme.fret.counter.color\n      },\n      '.fret': {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        background: theme.color\n      }\n    },\n    '.strings': {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      position: 'relative',\n      minHeight: stringHeight * 3 + \"em\",\n      '.string': {\n        margin: 0,\n        padding: 0,\n        border: 'none',\n        '.fret': {\n          display: 'flex',\n          alignItems: 'center',\n          '.actual-string': {\n            transition: 'opacity ease-in-out 0.1s',\n            content: '\"\"',\n            width: '100%',\n            height: '0.65em',\n            position: 'absolute',\n            left: '0'\n          },\n          label: {\n            fontSize: '1em',\n            width: '100%',\n            height: stringHeight + \"em\",\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            margin: 0\n          },\n          '&:hover input:not(:disabled):not(:checked) ~ .finger': {\n            opacity: 0.5\n          },\n          'input:not(:disabled)': {\n            height: '100%',\n            width: '100%'\n          },\n          'input:not(:disabled),input:not(:disabled) ~ .finger': {\n            cursor: 'pointer'\n          },\n          input: {\n            position: 'absolute',\n            margin: 0,\n            opacity: 0,\n            '&:checked ~ .finger': {\n              opacity: 1\n            },\n            '&:focus:not(:disabled) ~ .finger': {\n              boxShadow: '0 0 0 0.2em rgba(66, 153, 225, 0.5)'\n            }\n          },\n          '&.mute': {\n            'input:checked ~ .finger': {\n              opacity: 0\n            },\n            'input:focus ~ .finger,&:hover input:checked ~ .finger': {\n              opacity: 0.5\n            }\n          }\n        }\n      }\n    },\n    '.fretboard': {\n      position: 'absolute',\n      left: '0',\n      right: '0',\n      top: '0',\n      bottom: '0',\n      '.fret': {\n        display: 'flex',\n        flexDirection: 'row-reverse',\n        alignItems: 'center',\n        justifyContent: 'end',\n        backgroundColor: theme.fret.color,\n        '&.nut': {\n          backgroundColor: theme.nut.color\n        },\n        '&:not(.nut)::before': {\n          content: '\"\"',\n          position: 'absolute',\n          top: '0',\n          bottom: '0',\n          width: sw(theme) + \"em\",\n          backgroundColor: theme.fret.separator.color,\n          borderRight: theme.fret.separator.shadow ? \"solid \" + sw(theme) / 2 + \"em \" + color(theme.fret.separator.color).darken(0.1) : 0,\n          borderRadius: theme.fret.separator.radius ? '3px' : 0,\n          display: 'inline-block'\n        },\n        '.marker': {\n          position: 'absolute',\n          left: '0',\n          right: '0',\n          top: '0',\n          bottom: '0',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        }\n      }\n    },\n    '.finger': {\n      color: theme.finger.text.color,\n      transition: 'opacity ease-in-out 0.1s',\n      background: theme.finger.color,\n      width: '5em',\n      padding: '0',\n      height: 3.5 / 1.5 + \"em\",\n      borderRadius: '20px',\n      borderBottom: \"solid 0.2em \" + color(theme.finger.color).darken(0.35),\n      boxShadow: '0 1px 2px rgba(0, 0, 0, 0.16), 0 1px 2px rgba(0, 0, 0, 0.23)',\n      fontWeight: 'bold',\n      opacity: 0,\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      position: 'relative'\n    },\n    '.sr-only': {\n      position: 'absolute',\n      width: '1px',\n      height: '1px',\n      padding: 0,\n      margin: '-1px',\n      overflow: 'hidden',\n      clip: 'rect(0, 0, 0, 0)',\n      whiteSpace: 'nowrap',\n      borderWidth: 0\n    }\n  });\n};\n\n/** @jsx jsx */\nfunction getRenderFingerSpn(tuning) {\n  return function (string, fret) {\n    var _get = note.get(note.fromMidiSharps(tuning[string] + fret)),\n      letter = _get.letter,\n      acc = _get.acc,\n      oct = _get.oct;\n    return react.jsx(\"span\", null, letter, acc === '#' ? '♯' : acc === 'b' ? '♭' : '', react.jsx(\"sub\", {\n      \"aria-label\": \"octave \" + oct\n    }, oct));\n  };\n}\nvar mod = function mod(n, m) {\n  return (m + n % m) % m;\n};\nfunction getRenderFingerRelative(tuning, root) {\n  return function (string, fret) {\n    return react.jsx(react$1.Fragment, null, range(12).map(interval.fromSemitones)[mod(tuning[string] + fret - root, 12)]);\n  };\n}\nfunction Frets(props) {\n  var _props$frets = props.frets,\n    from = _props$frets.from,\n    amount = _props$frets.amount;\n  return react.jsx(\"div\", {\n    className: classNames(props.className, 'frets'),\n    onMouseEnter: props.onMouseEnter\n  }, props.currentFret !== undefined && react.jsx(\"div\", {\n    className: \"fret mute\",\n    style: {\n      zIndex: props.currentFret === -1 ? 1 : undefined\n    }\n  }, props.children == null ? void 0 : props.children(-1)), range(from, from + amount + 1).map(function (fret) {\n    return react.jsx(\"div\", {\n      className: classNames('fret', {\n        nut: fret === 0\n      }),\n      key: fret\n    }, props.children == null ? void 0 : props.children(fret));\n  }));\n}\nfunction Guitar(props) {\n  var _props$strings = props.strings,\n    strings = _props$strings === void 0 ? [] : _props$strings,\n    _props$frets2 = props.frets,\n    frets = _props$frets2 === void 0 ? {\n      from: 0,\n      amount: 22\n    } : _props$frets2,\n    _props$lefty = props.lefty,\n    lefty = _props$lefty === void 0 ? false : _props$lefty,\n    _props$center = props.center,\n    center = _props$center === void 0 ? false : _props$center,\n    renderFinger = props.renderFinger,\n    _props$theme = props.theme,\n    theme = _props$theme === void 0 ? spanishTheme : _props$theme,\n    playOnHover = props.playOnHover;\n  var id = react$1.useMemo(function () {\n    return props.id || uniqueId('guitar-');\n  }, [props.id]);\n  var styles = react$1.useMemo(function () {\n    return getStyles(theme);\n  }, [theme]);\n  var ref = react$1.useRef(null);\n  var focusString = function focusString(string, fret) {\n    var _ref$current, _ref$current$querySel;\n    if (fret === void 0) {\n      fret = strings[string];\n    }\n    return (_ref$current = ref.current) == null ? void 0 : _ref$current.querySelector == null ? void 0 : (_ref$current$querySel = _ref$current.querySelector(\"input[name=\\\"\" + id + \"-string-\" + string + \"\\\"][value=\\\"\" + fret + \"\\\"]\")) == null ? void 0 : _ref$current$querySel.focus();\n  };\n  var releaseString = function releaseString(string) {\n    return pressString(string, strings[string] === 0 ? -1 : 0);\n  };\n  var pressString = function pressString(string, fret) {\n    focusString(string, fret);\n    props.onChange == null ? void 0 : props.onChange(set(strings, string, fret));\n  };\n  var getNavigationDelta = function getNavigationDelta(e) {\n    switch (keyboardKey.getKey(e)) {\n      case 'ArrowDown':\n        return {\n          x: 0,\n          y: 1\n        };\n      case 'ArrowUp':\n        return {\n          x: 0,\n          y: -1\n        };\n      case 'ArrowRight':\n        return {\n          x: lefty ? -1 : 1,\n          y: 0\n        };\n      case 'ArrowLeft':\n        return {\n          x: lefty ? 1 : -1,\n          y: 0\n        };\n      default:\n        return null;\n    }\n  };\n  useLayoutEffect(function () {\n    var fretsNode = ref.current;\n    if (center && fretsNode) {\n      var children = fretsNode.querySelectorAll('.fret');\n      var pressedFrets = strings.filter(function (fret) {\n        return fret > 0;\n      });\n      var minFret = Math.min.apply(Math, pressedFrets);\n      var maxFret = Math.max.apply(Math, pressedFrets);\n      var toFret = minFret + Math.floor((maxFret - minFret) / 2);\n      var fretNode = children[toFret];\n      if (fretNode) {\n        fretsNode.scrollLeft = fretNode.offsetLeft - fretsNode.offsetWidth / 2 + fretNode.offsetWidth / 2;\n      }\n    }\n  }, [ref, strings, center, lefty]);\n  var _useState = react$1.useState(0),\n    focusedString = _useState[0],\n    setFocusedString = _useState[1];\n  return react.jsx(\"div\", {\n    id: id,\n    ref: ref,\n    css: styles,\n    className: classNames('guitar', {\n      lefty: lefty\n    }, props.className),\n    onKeyDown: function onKeyDown(e) {\n      var delta = getNavigationDelta(e.nativeEvent);\n      if (delta) {\n        var string = mod(focusedString + delta.y, strings.length);\n        var fret = strings[string] + delta.x;\n        pressString(string, fret > frets.from + frets.amount ? -1 : fret < -1 ? frets.from + frets.amount : fret);\n        e.preventDefault();\n      }\n    }\n  }, react.jsx(\"div\", {\n    className: \"sr-only\"\n  }, \"This is a guitar with \", strings.length, \" strings and \", frets.amount, \" frets, starting from \", frets.from, \". Its theme describes it as:\", ' ', theme.description, \".\", props.onChange && react.jsx(\"span\", null, \"Once you focus on a string you will be able to navigate strings and frets using the arrow keys.\"), props.onPlay && react.jsx(\"span\", null, \"When a specific string is focused you can play it by pressing 'p'.\")), react.jsx(\"div\", {\n    className: \"sr-only\",\n    role: \"status\"\n  }, \"Current fretting: \", strings.join(', '), \".\"), react.jsx(\"div\", {\n    className: \"strings\"\n  }, react.jsx(Frets, {\n    className: \"fretboard\",\n    frets: frets\n  }, theme.fret.marker ? function (fret) {\n    return react.jsx(\"div\", {\n      className: \"marker\"\n    }, theme.fret.marker == null ? void 0 : theme.fret.marker(fret));\n  } : undefined), strings.map(function (currentFret, string) {\n    return react.jsx(\"fieldset\", {\n      key: string,\n      className: \"string\"\n    }, react.jsx(\"legend\", {\n      className: \"sr-only\"\n    }, \"String \", string + 1, \".\", ' ', currentFret === -1 && 'This string is muted.'), react.jsx(Frets, {\n      currentFret: currentFret,\n      frets: frets,\n      onMouseEnter: function onMouseEnter() {\n        return playOnHover && (props.onPlay == null ? void 0 : props.onPlay(string));\n      }\n    }, function (fret) {\n      return react.jsx(\"label\", null, react.jsx(\"span\", {\n        className: \"sr-only\"\n      }, \"Fret \", fret, \" \", fret === -1 && '(Mute)', \".\"), fret >= 0 && react.jsx(\"span\", {\n        className: \"actual-string\",\n        style: {\n          opacity: currentFret === -1 ? 0.2 : 1,\n          borderBottom: \"solid 0.2em \" + color(theme.string.color(string)).darken(0.35),\n          backgroundColor: theme.string.color(string)\n        }\n      }), react.jsx(\"input\", {\n        disabled: !props.onChange,\n        type: \"radio\",\n        name: id + \"-string-\" + string,\n        value: fret,\n        checked: currentFret === fret,\n        onChange: function onChange(e) {\n          props.onChange == null ? void 0 : props.onChange(set(strings, string, fret));\n          e.target.focus();\n        },\n        onClick: function onClick() {\n          return fret === currentFret && releaseString(string);\n        },\n        onKeyDown: function onKeyDown(e) {\n          switch (e.keyCode) {\n            case 80:\n              props.onPlay == null ? void 0 : props.onPlay(string);\n              break;\n            case 13:\n              releaseString(string);\n              e.preventDefault();\n          }\n        },\n        onFocus: function onFocus() {\n          return setFocusedString(string);\n        }\n      }), react.jsx(\"span\", {\n        className: \"finger\"\n      }, renderFinger == null ? void 0 : renderFinger(string, fret === -1 ? 0 : fret)));\n    }));\n  })), react.jsx(Frets, {\n    className: \"frame\",\n    frets: frets\n  }, function (fret) {\n    return fret !== 0 ? react.jsx(\"span\", {\n      className: \"counter\"\n    }, fret) : null;\n  }));\n}\nexports.default = Guitar;\nexports.getRenderFingerRelative = getRenderFingerRelative;\nexports.getRenderFingerSpn = getRenderFingerSpn;\nexports.spanishTheme = spanishTheme;","map":{"version":3,"mappings":"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","names":["window","useLayoutEffect","useEffect","set","array","pos","item","newArray","slice","makeTheme","theme","description","color","nut","fret","separator","shadow","counter","string","finger","text","sw","width","stringHeight","css","fontFamily","position","boxSizing","maxWidth","overflowY","borderTopColor","borderTopStyle","borderTopWidth","overscrollBehaviorX","background","WebkitTapHighlightColor","direction","transform","left","right","display","flexShrink","top","height","fontWeight","alignItems","justifyContent","flexDirection","minHeight","margin","padding","border","transition","content","label","fontSize","opacity","cursor","input","boxShadow","bottom","backgroundColor","borderRight","darken","borderRadius","radius","borderBottom","overflow","clip","whiteSpace","borderWidth","getRenderFingerSpn","tuning","get","fromMidiSharps","letter","acc","oct","jsx","mod","n","m","getRenderFingerRelative","root","Fragment","range","map","fromSemitones","Frets","props","frets","from","amount","className","classNames","onMouseEnter","currentFret","undefined","style","zIndex","children","key","Guitar","strings","_props$frets2","_props$lefty","lefty","_props$center","center","renderFinger","_props$theme","spanishTheme","playOnHover","id","useMemo","uniqueId","styles","getStyles","ref","useRef","focusString","current","_ref$current","querySelector","_ref$current$querySel","focus","releaseString","pressString","onChange","getNavigationDelta","e","getKey","x","y","fretsNode","querySelectorAll","pressedFrets","filter","minFret","Math","min","apply","maxFret","max","toFret","floor","fretNode","scrollLeft","offsetLeft","offsetWidth","useState","focusedString","setFocusedString","onKeyDown","delta","nativeEvent","length","preventDefault","onPlay","role","join","marker","disabled","type","name","value","checked","target","onClick","keyCode","onFocus"],"sources":["/Users/macbook/Desktop/Music/OwnGuitar/node_modules/react-guitar/src/hooks/layoutEffect.ts","/Users/macbook/Desktop/Music/OwnGuitar/node_modules/react-guitar/src/util/arrays.ts","/Users/macbook/Desktop/Music/OwnGuitar/node_modules/react-guitar/src/util/theme.ts","/Users/macbook/Desktop/Music/OwnGuitar/node_modules/react-guitar/src/styles/index.ts","/Users/macbook/Desktop/Music/OwnGuitar/node_modules/react-guitar/src/index.tsx"],"sourcesContent":["import { useEffect, useLayoutEffect } from 'react'\n\nexport default typeof window !== 'undefined' ? useLayoutEffect : useEffect\n","export function set<T>(array: T[], pos: number, item: T): T[] {\n  const newArray = array.slice(0)\n  newArray[pos] = item\n  return newArray\n}\n","export type Theme = {\n  description: string\n  color: string\n  nut: { color: string }\n  fret: {\n    color: string\n    separator: {\n      color: string\n      radius?: boolean\n      shadow?: boolean\n      width?: 'sm' | 'md'\n    }\n    marker?: (fret: number) => JSX.Element | null\n    counter: { color: string }\n  }\n  string: { color: (string: number) => string }\n  finger: { text: { color: string }; color: string }\n}\nconst makeTheme = (theme: Theme) => theme\n\nexport default makeTheme({\n  description:\n    'A typical Spanish guitar with a brown fretboard and golden details',\n  color: '#333333',\n  nut: { color: '#fffacd' },\n  fret: {\n    color: '#9e6429',\n    separator: { color: '#daa520', shadow: true },\n    counter: { color: '#606c76' },\n  },\n  string: { color: () => '#eeeeee' },\n  finger: { text: { color: '#606c76' }, color: 'white' },\n})\n","/** @jsxRuntime classic */\n/** @jsx jsx */\nimport { css } from '@emotion/react'\nimport { Theme } from '..'\nimport color from 'color'\n\nconst sw = (theme: Theme) => (theme.fret.separator.width === 'md' ? 0.7 : 0.3)\nconst stringHeight = 3.33125\n\nexport default (theme: Theme) =>\n  css({\n    fontFamily: \"'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n    position: 'relative',\n    boxSizing: 'border-box',\n    maxWidth: '100%',\n    overflowY: 'auto',\n    borderTopColor: theme.color,\n    borderTopStyle: 'solid',\n    borderTopWidth: '0.5em',\n    overscrollBehaviorX: 'none',\n    background: theme.color,\n    WebkitTapHighlightColor: 'rgba(0, 0, 0, 0)',\n\n    '&.lefty': {\n      direction: 'rtl',\n      '.marker': {\n        transform: 'scale(-1, 1)',\n      },\n      '.mute': {\n        left: 'auto',\n        right: 0,\n      },\n    },\n\n    '*, *::before, *::after': {\n      boxSizing: 'border-box',\n    },\n\n    '.frets': {\n      display: 'flex',\n      position: 'relative',\n      '.fret': {\n        width: '10em',\n        flexShrink: 0,\n        position: 'relative',\n        '&.nut,&.mute': {\n          width: '7em',\n        },\n        '&.mute': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n        },\n      },\n    },\n\n    '.frame': {\n      height: '2em',\n      '.counter': {\n        fontWeight: 'bold',\n        color: theme.fret.counter.color,\n      },\n      '.fret': {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        background: theme.color,\n      },\n    },\n\n    '.strings': {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      position: 'relative',\n      minHeight: `${stringHeight * 3}em`,\n\n      '.string': {\n        margin: 0,\n        padding: 0,\n        border: 'none',\n        '.fret': {\n          display: 'flex',\n          alignItems: 'center',\n\n          '.actual-string': {\n            transition: 'opacity ease-in-out 0.1s',\n            content: '\"\"',\n            width: '100%',\n            height: '0.65em',\n            position: 'absolute',\n            left: '0',\n          },\n\n          label: {\n            fontSize: '1em',\n            width: '100%',\n            height: `${stringHeight}em`,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            margin: 0,\n          },\n\n          '&:hover input:not(:disabled):not(:checked) ~ .finger': {\n            opacity: 0.5,\n          },\n\n          'input:not(:disabled)': {\n            height: '100%',\n            width: '100%',\n          },\n\n          'input:not(:disabled),input:not(:disabled) ~ .finger': {\n            cursor: 'pointer',\n          },\n\n          input: {\n            position: 'absolute',\n            margin: 0,\n            opacity: 0,\n            '&:checked ~ .finger': {\n              opacity: 1,\n            },\n            '&:focus:not(:disabled) ~ .finger': {\n              boxShadow: '0 0 0 0.2em rgba(66, 153, 225, 0.5)',\n            },\n          },\n          '&.mute': {\n            'input:checked ~ .finger': {\n              opacity: 0,\n            },\n            'input:focus ~ .finger,&:hover input:checked ~ .finger': {\n              opacity: 0.5,\n            },\n          },\n        },\n      },\n    },\n\n    '.fretboard': {\n      position: 'absolute',\n      left: '0',\n      right: '0',\n      top: '0',\n      bottom: '0',\n      '.fret': {\n        display: 'flex',\n        flexDirection: 'row-reverse',\n        alignItems: 'center',\n        justifyContent: 'end',\n        backgroundColor: theme.fret.color,\n        '&.nut': {\n          backgroundColor: theme.nut.color,\n        },\n        '&:not(.nut)::before': {\n          content: '\"\"',\n          position: 'absolute',\n          top: '0',\n          bottom: '0',\n          width: `${sw(theme)}em`,\n          backgroundColor: theme.fret.separator.color,\n          borderRight: theme.fret.separator.shadow\n            ? `solid ${sw(theme) / 2}em ${color(\n                theme.fret.separator.color\n              ).darken(0.1)}`\n            : 0,\n          borderRadius: theme.fret.separator.radius ? '3px' : 0,\n          display: 'inline-block',\n        },\n        '.marker': {\n          position: 'absolute',\n          left: '0',\n          right: '0',\n          top: '0',\n          bottom: '0',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        },\n      },\n    },\n\n    '.finger': {\n      color: theme.finger.text.color,\n      transition: 'opacity ease-in-out 0.1s',\n      background: theme.finger.color,\n      width: '5em',\n      padding: '0',\n      height: `${3.5 / 1.5}em`,\n      borderRadius: '20px',\n      borderBottom: `solid 0.2em ${color(theme.finger.color).darken(0.35)}`,\n      boxShadow: '0 1px 2px rgba(0, 0, 0, 0.16), 0 1px 2px rgba(0, 0, 0, 0.23)',\n      fontWeight: 'bold',\n      opacity: 0,\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      position: 'relative',\n    },\n\n    '.sr-only': {\n      position: 'absolute',\n      width: '1px',\n      height: '1px',\n      padding: 0,\n      margin: '-1px',\n      overflow: 'hidden',\n      clip: 'rect(0, 0, 0, 0)',\n      whiteSpace: 'nowrap',\n      borderWidth: 0,\n    },\n  })\n","/** @jsx jsx */\nimport { jsx } from '@emotion/react'\nimport { useRef, Fragment, useMemo, ReactElement, useState } from 'react'\nimport useLayoutEffect from './hooks/layoutEffect'\nimport range from 'lodash.range'\nimport uniqueId from 'lodash.uniqueid'\nimport { set } from './util/arrays'\nimport classNames from 'classnames'\nimport { get, fromMidiSharps } from '@tonaljs/note'\nimport { fromSemitones } from '@tonaljs/interval'\nimport spanishTheme, { Theme } from './util/theme'\nimport getStyles from './styles'\nimport color from 'color'\nimport { getKey } from 'keyboard-key'\n\nexport { spanishTheme, Theme }\n\nexport function getRenderFingerSpn(tuning: number[]) {\n  return (string: number, fret: number) => {\n    const { letter, acc, oct } = get(fromMidiSharps(tuning[string] + fret))\n    return (\n      <span>\n        {letter}\n        {acc === '#' ? '♯' : acc === 'b' ? '♭' : ''}\n        <sub aria-label={`octave ${oct}`}>{oct}</sub>\n      </span>\n    )\n  }\n}\n\nconst mod = (n: number, m: number) => (m + (n % m)) % m\n\nexport function getRenderFingerRelative(tuning: number[], root: number) {\n  return (string: number, fret: number) => (\n    <Fragment>\n      {range(12).map(fromSemitones)[mod(tuning[string] + fret - root, 12)]}\n    </Fragment>\n  )\n}\n\nfunction Frets(props: {\n  className?: string\n  currentFret?: number\n  frets: {\n    from: number\n    amount: number\n  }\n  children?: (fret: number) => ReactElement | ReactElement[] | null\n  onMouseEnter?: () => void\n}) {\n  const { from, amount } = props.frets\n  return (\n    <div\n      className={classNames(props.className, 'frets')}\n      onMouseEnter={props.onMouseEnter}\n    >\n      {props.currentFret !== undefined && (\n        <div\n          className=\"fret mute\"\n          style={{ zIndex: props.currentFret === -1 ? 1 : undefined }}\n        >\n          {props.children?.(-1)}\n        </div>\n      )}\n      {range(from, from + amount + 1).map((fret) => (\n        <div className={classNames('fret', { nut: fret === 0 })} key={fret}>\n          {props.children?.(fret)}\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default function Guitar(props: {\n  id?: string\n  className?: string\n  strings?: number[]\n  frets?: {\n    from: number\n    amount: number\n  }\n  lefty?: boolean\n  center?: boolean\n  renderFinger?: (string: number, fret: number) => JSX.Element\n  theme?: Theme\n  playOnHover?: boolean\n  onChange?: (strings: number[]) => void\n  onPlay?: (string: number) => void\n}) {\n  const {\n    strings = [],\n    frets = { from: 0, amount: 22 },\n    lefty = false,\n    center = false,\n    renderFinger,\n    theme = spanishTheme,\n    playOnHover,\n  } = props\n  const id = useMemo(() => props.id || uniqueId('guitar-'), [props.id])\n  const styles = useMemo(() => getStyles(theme), [theme])\n  const ref = useRef(null as HTMLDivElement | null)\n  const focusString = (string: number, fret: number = strings[string]) =>\n    ref.current\n      ?.querySelector?.<HTMLInputElement>(\n        `input[name=\"${id}-string-${string}\"][value=\"${fret}\"]`\n      )\n      ?.focus()\n  const releaseString = (string: number) =>\n    pressString(string, strings[string] === 0 ? -1 : 0)\n  const pressString = (string: number, fret: number) => {\n    focusString(string, fret)\n    props.onChange?.(set(strings, string, fret))\n  }\n  const getNavigationDelta = (e: KeyboardEvent) => {\n    switch (getKey(e)) {\n      case 'ArrowDown':\n        return { x: 0, y: 1 }\n      case 'ArrowUp':\n        return { x: 0, y: -1 }\n      case 'ArrowRight':\n        return { x: lefty ? -1 : 1, y: 0 }\n      case 'ArrowLeft':\n        return { x: lefty ? 1 : -1, y: 0 }\n      default:\n        return null\n    }\n  }\n  useLayoutEffect(() => {\n    const fretsNode = ref.current\n    if (center && fretsNode) {\n      const children = fretsNode.querySelectorAll('.fret')\n      const pressedFrets = strings.filter((fret) => fret > 0)\n      const minFret = Math.min.apply(Math, pressedFrets)\n      const maxFret = Math.max.apply(Math, pressedFrets)\n      const toFret = minFret + Math.floor((maxFret - minFret) / 2)\n      const fretNode = children[toFret] as HTMLElement | undefined\n      if (fretNode) {\n        fretsNode.scrollLeft =\n          fretNode.offsetLeft -\n          fretsNode.offsetWidth / 2 +\n          fretNode.offsetWidth / 2\n      }\n    }\n  }, [ref, strings, center, lefty])\n  const [focusedString, setFocusedString] = useState(0)\n  return (\n    <div\n      id={id}\n      ref={ref}\n      css={styles}\n      className={classNames('guitar', { lefty }, props.className)}\n      onKeyDown={(e) => {\n        const delta = getNavigationDelta(e.nativeEvent)\n        if (delta) {\n          const string = mod(focusedString + delta.y, strings.length)\n          const fret = strings[string] + delta.x\n          pressString(\n            string,\n            fret > frets.from + frets.amount\n              ? -1\n              : fret < -1\n              ? frets.from + frets.amount\n              : fret\n          )\n          e.preventDefault()\n        }\n      }}\n    >\n      <div className=\"sr-only\">\n        This is a guitar with {strings.length} strings and {frets.amount} frets,\n        starting from {frets.from}. Its theme describes it as:{' '}\n        {theme.description}.\n        {props.onChange && (\n          <span>\n            Once you focus on a string you will be able to navigate strings and\n            frets using the arrow keys.\n          </span>\n        )}\n        {props.onPlay && (\n          <span>\n            When a specific string is focused you can play it by pressing 'p'.\n          </span>\n        )}\n      </div>\n      <div className=\"sr-only\" role=\"status\">\n        Current fretting: {strings.join(', ')}.\n      </div>\n      <div className=\"strings\">\n        <Frets className=\"fretboard\" frets={frets}>\n          {theme.fret.marker\n            ? (fret) => (\n                <div className=\"marker\">{theme.fret.marker?.(fret)}</div>\n              )\n            : undefined}\n        </Frets>\n        {strings.map((currentFret, string) => (\n          <fieldset key={string} className=\"string\">\n            <legend className=\"sr-only\">\n              String {string + 1}.{' '}\n              {currentFret === -1 && 'This string is muted.'}\n            </legend>\n            <Frets\n              currentFret={currentFret}\n              frets={frets}\n              onMouseEnter={() => playOnHover && props.onPlay?.(string)}\n            >\n              {(fret) => (\n                <label>\n                  <span className=\"sr-only\">\n                    Fret {fret} {fret === -1 && '(Mute)'}.\n                  </span>\n                  {fret >= 0 && (\n                    <span\n                      className=\"actual-string\"\n                      style={{\n                        opacity: currentFret === -1 ? 0.2 : 1,\n                        borderBottom: `solid 0.2em ${color(\n                          theme.string.color(string)\n                        ).darken(0.35)}`,\n                        backgroundColor: theme.string.color(string),\n                      }}\n                    />\n                  )}\n                  <input\n                    disabled={!props.onChange}\n                    type=\"radio\"\n                    name={`${id}-string-${string}`}\n                    value={fret}\n                    checked={currentFret === fret}\n                    onChange={(e) => {\n                      props.onChange?.(set(strings, string, fret))\n                      e.target.focus()\n                    }}\n                    onClick={() =>\n                      fret === currentFret && releaseString(string)\n                    }\n                    onKeyDown={(e) => {\n                      switch (e.keyCode) {\n                        case 80:\n                          props.onPlay?.(string)\n                          break\n                        case 13:\n                          releaseString(string)\n                          e.preventDefault()\n                      }\n                    }}\n                    onFocus={() => setFocusedString(string)}\n                  />\n                  <span className=\"finger\">\n                    {renderFinger?.(string, fret === -1 ? 0 : fret)}\n                  </span>\n                </label>\n              )}\n            </Frets>\n          </fieldset>\n        ))}\n      </div>\n      <Frets className=\"frame\" frets={frets}>\n        {(fret) =>\n          fret !== 0 ? <span className=\"counter\">{fret}</span> : null\n        }\n      </Frets>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}